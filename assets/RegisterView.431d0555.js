import{y as N,B as R,t as B,O as S,u as i,o as v,c as V,w as l,a,d as b,G as D,P as O,L as h,h as w,Z as H,f as U,J as u,R as M,r as I,z as k,ap as j,ak as z,V as T,p as F,E as G,F as q,D as A,a1 as J,al as W,e as Z,i as K,a3 as y,a9 as E,A as C}from"./index.93260499.js";import{_ as Q}from"./SectionFullScreen.61973be9.js";import{_ as n}from"./FormField.dcff6fad.js";import{_ as L}from"./BaseButtons.cd78754e.js";import{_ as X}from"./CardBoxComponentTitle.c9a2dfa5.js";const Y={class:"flex items-center justify-center w-full"},x={__name:"EditAvatar",props:{title:{type:String,required:!0},button:{type:String,default:"info"},buttonLabel:{type:String,default:"Close"},avatar:{type:Object},hasCancel:Boolean,modelValue:{type:[String,Number,Boolean],default:null}},emits:["update:modelValue","close"],setup(t,{emit:f}){const p=t,m=N(),s=R({get:()=>p.modelValue,set:r=>f("update:modelValue",r)}),c=r=>{s.value=!1,f(r)},g=()=>c("close");return window.addEventListener("keydown",r=>{r.key==="Escape"&&s.value&&g()}),(r,o)=>B((v(),V(M,{onOverlayClick:r.cancel},{default:l(()=>[B(a(U,{class:"shadow-lg max-h-modal w-11/12 md:w-3/5 lg:w-2/5 xl:w-4/12 z-50 overflow-scroll","is-modal":""},{footer:l(()=>[a(L,null,{default:l(()=>[a(b,{label:t.buttonLabel,color:t.button,onClick:g},null,8,["label","color"]),t.hasCancel?(v(),V(b,{key:0,label:"Cancel",color:t.button,outline:"",onClick:r.cancel},null,8,["color","onClick"])):D("",!0)]),_:1})]),default:l(()=>[a(X,{title:t.title},{default:l(()=>[t.hasCancel?(v(),V(b,{key:0,icon:i(O),color:"whiteDark",small:"","rounded-full":"",onClick:h(r.cancel,["prevent"])},null,8,["icon","onClick"])):D("",!0)]),_:1},8,["title"]),w("div",Y,[a(H,{avatar:t.avatar},null,8,["avatar"])]),a(U,{form:"",onSubmit:h(r.submit,["prevent"])},{footer:l(()=>[]),default:l(()=>[a(n,null,{default:l(()=>[a(n,{label:r.$t("avatar.clothes")},{default:l(()=>[a(u,{modelValue:t.avatar.clotheType,"onUpdate:modelValue":o[0]||(o[0]=e=>t.avatar.clotheType=e),options:i(m).config.avatarConfig.clothes},null,8,["modelValue","options"])]),_:1},8,["label"]),a(n,{label:r.$t("avatar.clotheColor")},{default:l(()=>[a(u,{modelValue:t.avatar.clotheColor,"onUpdate:modelValue":o[1]||(o[1]=e=>t.avatar.clotheColor=e),options:i(m).config.avatarConfig.topColor},null,8,["modelValue","options"])]),_:1},8,["label"])]),_:1}),a(n,null,{default:l(()=>[a(n,{label:r.$t("avatar.top")},{default:l(()=>[a(u,{modelValue:t.avatar.topType,"onUpdate:modelValue":o[2]||(o[2]=e=>t.avatar.topType=e),options:i(m).config.avatarConfig.top},null,8,["modelValue","options"])]),_:1},8,["label"]),a(n,{label:r.$t("avatar.topColor")},{default:l(()=>[a(u,{modelValue:t.avatar.topColor,"onUpdate:modelValue":o[3]||(o[3]=e=>t.avatar.topColor=e),options:i(m).config.avatarConfig.topColor},null,8,["modelValue","options"])]),_:1},8,["label"])]),_:1}),a(n,null,{default:l(()=>[a(n,{label:r.$t("avatar.accessories")},{default:l(()=>[a(u,{modelValue:t.avatar.accessoriesType,"onUpdate:modelValue":o[4]||(o[4]=e=>t.avatar.accessoriesType=e),options:i(m).config.avatarConfig.accessories},null,8,["modelValue","options"])]),_:1},8,["label"]),a(n,{label:r.$t("avatar.hairColor")},{default:l(()=>[a(u,{modelValue:t.avatar.hairColor,"onUpdate:modelValue":o[5]||(o[5]=e=>t.avatar.hairColor=e),options:i(m).config.avatarConfig.hairColor},null,8,["modelValue","options"])]),_:1},8,["label"])]),_:1}),a(n,null,{default:l(()=>[a(n,{label:r.$t("avatar.facialHair")},{default:l(()=>[a(u,{modelValue:t.avatar.facialHairType,"onUpdate:modelValue":o[6]||(o[6]=e=>t.avatar.facialHairType=e),options:i(m).config.avatarConfig.facialHair},null,8,["modelValue","options"])]),_:1},8,["label"]),a(n,{label:r.$t("avatar.facialHairColor")},{default:l(()=>[a(u,{modelValue:t.avatar.facialHairColor,"onUpdate:modelValue":o[7]||(o[7]=e=>t.avatar.facialHairColor=e),options:i(m).config.avatarConfig.hairColor},null,8,["modelValue","options"])]),_:1},8,["label"])]),_:1}),a(n,null,{default:l(()=>[a(n,{label:r.$t("avatar.eyebrows")},{default:l(()=>[a(u,{modelValue:t.avatar.eyebrowType,"onUpdate:modelValue":o[8]||(o[8]=e=>t.avatar.eyebrowType=e),options:i(m).config.avatarConfig.eyebrows},null,8,["modelValue","options"])]),_:1},8,["label"]),a(n,{label:r.$t("avatar.eyes")},{default:l(()=>[a(u,{modelValue:t.avatar.eyeType,"onUpdate:modelValue":o[9]||(o[9]=e=>t.avatar.eyeType=e),options:i(m).config.avatarConfig.eyes},null,8,["modelValue","options"])]),_:1},8,["label"])]),_:1}),a(n,null,{default:l(()=>[a(n,{label:r.$t("avatar.mouths")},{default:l(()=>[a(u,{modelValue:t.avatar.mouthType,"onUpdate:modelValue":o[10]||(o[10]=e=>t.avatar.mouthType=e),options:i(m).config.avatarConfig.mouths},null,8,["modelValue","options"])]),_:1},8,["label"])]),_:1}),a(n,null,{default:l(()=>[a(n,{label:r.$t("avatar.skins")},{default:l(()=>[a(u,{modelValue:t.avatar.skinColor,"onUpdate:modelValue":o[11]||(o[11]=e=>t.avatar.skinColor=e),options:i(m).config.avatarConfig.skins},null,8,["modelValue","options"])]),_:1},8,["label"]),a(n,{label:r.$t("avatar.graphic")},{default:l(()=>[a(u,{modelValue:t.avatar.graphicType,"onUpdate:modelValue":o[12]||(o[12]=e=>t.avatar.graphicType=e),options:i(m).config.avatarConfig.graphic},null,8,["modelValue","options"])]),_:1},8,["label"])]),_:1})]),_:1},8,["onSubmit"])]),_:1},512),[[S,i(s)]])]),_:1},8,["onOverlayClick"])),[[S,i(s)]])}},_={class:"text-center text-3xl"},aa={class:"flex items-center justify-center w-full"},ea={class:"flex items-center justify-center w-full p-4"},ia={__name:"RegisterView",setup(t){const f=N();f.fetchConfig();const p=I(!1),m=k({is_circle:!0,topType:"NoHair",accessoriesType:"Blank",hairColor:"Black",facialHairType:"Blank",clotheType:"Hoodie",eyeType:"Default",eyebrowType:"Default",mouthType:"Default",skinColor:"Light",topColor:"Black",graphicType:"Deer",facialHairColor:"Black",clotheColor:"Black",circleColor:"6fb8e0"}),s=k({email:"",password:"",password2:"",firstname:"",lastname:"",yob:1970,lang:f.lang}),c=k({errors:[]}),g=W();j(()=>{f.$patch({lang:s.lang})});const r=()=>{var o={email:s.email,avatar:m,password:s.password,yob:s.yob,lang:s.lang,firstname:s.firstname,lastname:s.lastname,is_active:!1,is_superuser:!1,is_verified:!1,is_accepted:!1,is_email_verified:!1,roles:["User"]};C.post(`${f.api}/auth/register`,o).then(e=>{f.setAccessToken("Bearer "+e.data.access_token),C.defaults.baseURL=f.api,C.defaults.headers.common.Authorization="Bearer "+e.data.access_token,C.get("/users/me").then($=>{f.setUser($.data)}).then(function(){g.push("/dashboard")})}).catch(e=>{e.response&&(e.response.status==422?c.errors.push("Field validation error"):e.response.data.detail=="LOGIN_BAD_CREDENTIALS"?c.errors.push("Wrong login"):(e.response.data.detail="LOGIN_USER_NOT_VERIFIED")&&c.errors.push("User is not verified. Make sure that you have verified your E-Mail-Address and that the organisation has accepted your Account."),c.errors=c.errors.slice(-3))})};return(o,e)=>(v(),V(z,null,{default:l(()=>[a(Q,{bg:"purplePink"},{default:l(({cardClass:$})=>[a(x,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=d=>p.value=d),title:"Sample modal",avatar:m},null,8,["modelValue","avatar"]),a(U,{class:T($),"is-form":"",onSubmit:h(r,["prevent"])},{footer:l(()=>[a(L,null,{default:l(()=>[a(b,{type:"submit",color:"info",label:"Register"}),a(b,{to:"/dashboard",color:"info",outline:"",label:o.$t("account.register")},null,8,["label"])]),_:1})]),default:l(()=>[(v(!0),F(q,null,G(c.errors,(d,P)=>(v(),V(Z,{onDeleted:la=>c.errors.splice(P,1),key:c.errors,color:"danger"},{default:l(()=>[K(A(d),1)]),_:2},1032,["onDeleted"]))),128)),w("h2",_,A(o.$t("account.register")),1),w("div",aa,[a(H,{avatar:m},null,8,["avatar"])]),w("div",ea,[a(b,{color:"info",label:"Change Avatar",onClick:e[1]||(e[1]=d=>p.value=!0),onClose:e[2]||(e[2]=d=>p.value=!1)})]),a(J),a(n,null,{default:l(()=>[a(n,{label:o.$t("account.firstName"),help:"Please enter your first name"},{default:l(()=>[a(u,{modelValue:s.firstname,"onUpdate:modelValue":e[3]||(e[3]=d=>s.firstname=d),icon:i(y),name:"login",autocomplete:"firstname"},null,8,["modelValue","icon"])]),_:1},8,["label"]),a(n,{label:o.$t("account.lastName"),help:"Please enter your last name"},{default:l(()=>[a(u,{modelValue:s.lastname,"onUpdate:modelValue":e[4]||(e[4]=d=>s.lastname=d),icon:i(y),name:"login",autocomplete:"lastname"},null,8,["modelValue","icon"])]),_:1},8,["label"])]),_:1}),a(n,{label:o.$t("account.email"),help:"Please enter your E-Mail-Address"},{default:l(()=>[a(u,{modelValue:s.email,"onUpdate:modelValue":e[5]||(e[5]=d=>s.email=d),icon:i(y),name:"login",autocomplete:"username"},null,8,["modelValue","icon"])]),_:1},8,["label"]),a(n,{label:o.$t("account.password"),help:"Please enter your password"},{default:l(()=>[a(u,{modelValue:s.password,"onUpdate:modelValue":e[6]||(e[6]=d=>s.password=d),icon:i(E),type:"password",name:"password",class:T(""),autocomplete:"current-password"},null,8,["modelValue","icon"])]),_:1},8,["label"]),a(n,{label:o.$t("account.confirmPassword"),help:"Please enter your password"},{default:l(()=>[a(u,{modelValue:s.password2,"onUpdate:modelValue":e[7]||(e[7]=d=>s.password2=d),icon:i(E),type:"password",name:"password",class:T(""),autocomplete:"current-password"},null,8,["modelValue","icon"])]),_:1},8,["label"]),a(n,null,{default:l(()=>[a(n,{label:o.$t("account.yob"),help:"Please enter your year of birth"},{default:l(()=>[a(u,{modelValue:s.yob,"onUpdate:modelValue":e[8]||(e[8]=d=>s.yob=d),type:"number",icon:i(y),name:"login",autocomplete:"username"},null,8,["modelValue","icon"])]),_:1},8,["label"]),a(n,{label:o.$t("account.language")},{default:l(()=>[a(u,{modelValue:s.lang,"onUpdate:modelValue":e[9]||(e[9]=d=>s.lang=d),options:i(f).config.langs},null,8,["modelValue","options"])]),_:1},8,["label"])]),_:1})]),_:2},1032,["class","onSubmit"])]),_:1})]),_:1}))}};export{ia as default};
