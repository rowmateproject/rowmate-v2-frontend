import{r as v,q as T,o as d,c as w,w as n,h as l,s as O,v as W,t as Q,x as E,y as F,z as C,A as x,B as z,p as c,a,C as _,F as B,D as M,E as D,d as P,u as p,G as X,H as Y,I as N,J as Z,K as ee,f as R,_ as te,L as ae,b as A,g as le,M as oe,N as ne}from"./index.a40d960c.js";import{_ as L}from"./CardBoxModal.236cb3dc.js";import{_ as U}from"./BaseButtons.8e00bda5.js";import{_ as se}from"./FormCheckRadioGroup.2016cccb.js";import{_ as $}from"./FormField.ccb7a2e0.js";const de={class:"checkbox"},ue=l("span",{class:"check"},null,-1),re={__name:"TableCheckboxCell",props:{type:{type:String,default:"td"}},emits:["checked"],setup(y,{emit:g}){const i=v(!1);return T(i,e=>{g("checked",e)}),(e,m)=>(d(),w(Q(y.type),{class:"lg:w-1"},{default:n(()=>[l("label",de,[O(l("input",{"onUpdate:modelValue":m[0]||(m[0]=f=>i.value=f),type:"checkbox"},null,512),[[W,i.value]]),ue])]),_:1}))}},ie=l("p",null,"The boat was deleted",-1),ce={key:0,class:"p-3 bg-gray-100/50 dark:bg-slate-800"},me={key:0},_e=l("th",null,"Name",-1),pe=l("th",null,"Category",-1),fe=l("th",null,"People",-1),he=l("th",null,"Cox",-1),be=l("th",null,null,-1),ve={"data-label":"Name"},ye={"data-label":"Category"},ge={"data-label":"Total"},ke={"data-label":"Cox"},xe={class:"before:hidden lg:w-1 whitespace-nowrap"},Ce={key:1,class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},Ve={__name:"BoatsEditTable",props:{checkable:Boolean,reload:{type:Number,default:0}},setup(y){const g=y,i=E(),e=F({boats:[],delete:{_id:"",name:""}});C.defaults.baseURL=i.api,C.defaults.headers.common.Authorization=i.access_token;const m=async()=>{e.boats=await C.get("/boats/").then(r=>r.data)},f=x(()=>g.reload);z(()=>{m()}),T(f,(r,o)=>{m()},{deep:!0});const h=v(!1),s=v(!1),u=v(10),b=v(0),k=v([]),j=x(()=>e.boats.slice(u.value*b.value,u.value*(b.value+1))),S=x(()=>Math.ceil(e.boats.length/u.value)),H=x(()=>b.value+1),q=x(()=>{const r=[];for(let o=0;o<S.value;o++)r.push(o);return r}),G=(r,o)=>{const t=[];return r.forEach(V=>{o(V)||t.push(V)}),t},I=(r,o)=>{r?k.value.push(o):k.value=G(k.value,t=>t.id===o.id)},J=(r,o)=>{e.delete._id=r,e.delete.name=o,s.value=!0},K=r=>{C.delete("/boats/"+r).then(()=>{h.value=!0,m()})};return(r,o)=>(d(),c(B,null,[a(L,{modelValue:h.value,"onUpdate:modelValue":o[0]||(o[0]=t=>h.value=t),title:"Boat deleted"},{default:n(()=>[ie]),_:1},8,["modelValue"]),a(L,{modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=t=>s.value=t),buttonLabel:"Delete",title:"Confirm deletion",button:"danger","has-cancel":"",onConfirm:o[2]||(o[2]=t=>K(e.delete._id))},{default:n(()=>[l("p",null,"Do you want to delete the boat with the name "+_(e.delete.name)+" and the id "+_(e.delete._id)+"?",1)]),_:1},8,["modelValue"]),k.value.length?(d(),c("div",ce,[(d(!0),c(B,null,M(k.value,t=>(d(),c("span",{key:t.id,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-slate-700"},_(t.name),1))),128))])):D("",!0),(d(),c("table",{key:e.boats},[l("thead",null,[l("tr",null,[y.checkable?(d(),c("th",me)):D("",!0),_e,pe,fe,he,be])]),(d(),c("tbody",{key:e.boats},[(d(!0),c(B,null,M(p(j),t=>(d(),c("tr",{key:t._id},[y.checkable?(d(),w(re,{key:0,onChecked:V=>I(V,t)},null,8,["onChecked"])):D("",!0),l("td",ve,_(t.name),1),l("td",ye,_(t.category),1),l("td",ge,_(t.total),1),l("td",ke,_(t.cox),1),l("td",xe,[a(U,{type:"justify-start lg:justify-end","no-wrap":""},{default:n(()=>[a(P,{color:"danger",icon:p(X),small:"",onClick:V=>J(t._id,t.name)},null,8,["icon","onClick"])]),_:2},1024)])]))),128))]))])),p(S)!==1?(d(),c("div",Ce,[a(Y,null,{default:n(()=>[a(U,null,{default:n(()=>[(d(!0),c(B,null,M(p(q),t=>(d(),w(P,{key:t,active:t===b.value,label:t+1,color:t===b.value?"lightDark":"whiteDark",small:"",onClick:V=>b.value=t},null,8,["active","label","color","onClick"]))),128))]),_:1}),l("small",null,"Page "+_(p(H))+" of "+_(p(S)),1)]),_:1})])):D("",!0)],64))}},$e={__name:"AddBoatForm",emits:["reload"],setup(y,{emit:g}){const i=E(),e=F({name:"",cox:!1,people:1,category:"racing"});C.defaults.baseURL=i.api,C.defaults.headers.common.Authorization=i.access_token;const m=(h,s,u,b)=>{C.post("/boats/add",{name:h,category:s,total:u,cox:b}).then(k=>{console.log("Boat added with id "+k.data.id),g("reload")})},f=["racing","cgig","other"];return(h,s)=>(d(),w(R,{form:"",onSubmit:ee(h.submit,["prevent"])},{footer:n(()=>[a(U,null,{default:n(()=>[a(P,{type:"submit",color:"info",label:"Add Boat",onClick:s[4]||(s[4]=u=>m(e.name,e.category,e.people,e.cox))})]),_:1})]),default:n(()=>[a($,{label:"Name"},{default:n(()=>[a(N,{modelValue:e.name,"onUpdate:modelValue":s[0]||(s[0]=u=>e.name=u),icon:p(Z)},null,8,["modelValue","icon"])]),_:1}),a($,null,{default:n(()=>[a($,{label:"Name"},{default:n(()=>[a(N,{modelValue:e.category,"onUpdate:modelValue":s[1]||(s[1]=u=>e.category=u),options:f},null,8,["modelValue"])]),_:1}),a($,{label:"Coxed"},{default:n(()=>[a(se,{modelValue:e.cox,"onUpdate:modelValue":s[2]||(s[2]=u=>e.cox=u),name:"sample-switch",type:"switch",options:{cox:"Coxed"}},null,8,["modelValue"])]),_:1}),a($,{label:"People"},{default:n(()=>[a(N,{modelValue:e.people,"onUpdate:modelValue":s[3]||(s[3]=u=>e.people=u),type:"number",min:"1",max:"100"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["onSubmit"]))}},we=l("div",{class:"py-8"},null,-1),Pe={__name:"BoatsView",setup(y){const g=v(null),i=()=>{g.value=ae()};z(()=>{i()});const e=v(0);return x(()=>mainStore.clients.slice(0,4)),x(()=>mainStore.history),(m,f)=>(d(),w(te,null,{default:n(()=>[a(le,null,{default:n(()=>[a(A,{icon:p(oe),title:"Boats",main:""},null,8,["icon"]),a(R,{"has-table":""},{default:n(()=>[a(Ve,{reload:e.value},null,8,["reload"])]),_:1}),we,a(A,{icon:p(ne),title:"Add Boat",main:""},null,8,["icon"]),a($e,{onReload:f[0]||(f[0]=h=>e.value++)})]),_:1})]),_:1}))}};export{Pe as default};
