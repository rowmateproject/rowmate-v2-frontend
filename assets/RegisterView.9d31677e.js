import{x as N,A as R,s as S,O as B,u as s,o as v,c as V,w as l,a,d as b,E as D,P as O,K as h,h as w,Z as H,f as U,I as u,R as I,r as M,y as k,ap as j,ak as F,V as T,p as z,D as G,F as q,C as A,a1 as K,al as W,e as Z,i as J,a3 as y,a9 as E,z as C}from"./index.f16a4af5.js";import{_ as Q}from"./SectionFullScreen.e595ef44.js";import{_ as n}from"./FormField.9524fff4.js";import{_ as L}from"./BaseButtons.050f4d9a.js";import{_ as X}from"./CardBoxComponentTitle.d98255a2.js";const Y={class:"flex items-center justify-center w-full"},x={__name:"EditAvatar",props:{title:{type:String,required:!0},button:{type:String,default:"info"},buttonLabel:{type:String,default:"Close"},avatar:{type:Object},hasCancel:Boolean,modelValue:{type:[String,Number,Boolean],default:null}},emits:["update:modelValue","close"],setup(t,{emit:f}){const c=t,m=N(),i=R({get:()=>c.modelValue,set:r=>f("update:modelValue",r)}),p=r=>{i.value=!1,f(r)},g=()=>p("close");return window.addEventListener("keydown",r=>{r.key==="Escape"&&i.value&&g()}),(r,o)=>S((v(),V(I,{onOverlayClick:r.cancel},{default:l(()=>[S(a(U,{class:"shadow-lg max-h-modal w-11/12 md:w-3/5 lg:w-2/5 xl:w-4/12 z-50 overflow-scroll","is-modal":""},{footer:l(()=>[a(L,null,{default:l(()=>[a(b,{label:t.buttonLabel,color:t.button,onClick:g},null,8,["label","color"]),t.hasCancel?(v(),V(b,{key:0,label:"Cancel",color:t.button,outline:"",onClick:r.cancel},null,8,["color","onClick"])):D("",!0)]),_:1})]),default:l(()=>[a(X,{title:t.title},{default:l(()=>[t.hasCancel?(v(),V(b,{key:0,icon:s(O),color:"whiteDark",small:"","rounded-full":"",onClick:h(r.cancel,["prevent"])},null,8,["icon","onClick"])):D("",!0)]),_:1},8,["title"]),w("div",Y,[a(H,{avatar:t.avatar},null,8,["avatar"])]),a(U,{form:"",onSubmit:h(r.submit,["prevent"])},{footer:l(()=>[]),default:l(()=>[a(n,null,{default:l(()=>[a(n,{label:r.$t("avatar.clothes")},{default:l(()=>[a(u,{modelValue:t.avatar.clotheType,"onUpdate:modelValue":o[0]||(o[0]=e=>t.avatar.clotheType=e),options:s(m).config.avatarConfig.clothes},null,8,["modelValue","options"])]),_:1},8,["label"]),a(n,{label:r.$t("avatar.clotheColor")},{default:l(()=>[a(u,{modelValue:t.avatar.clotheColor,"onUpdate:modelValue":o[1]||(o[1]=e=>t.avatar.clotheColor=e),options:s(m).config.avatarConfig.topColor},null,8,["modelValue","options"])]),_:1},8,["label"])]),_:1}),a(n,null,{default:l(()=>[a(n,{label:r.$t("avatar.top")},{default:l(()=>[a(u,{modelValue:t.avatar.topType,"onUpdate:modelValue":o[2]||(o[2]=e=>t.avatar.topType=e),options:s(m).config.avatarConfig.top},null,8,["modelValue","options"])]),_:1},8,["label"]),a(n,{label:r.$t("avatar.topColor")},{default:l(()=>[a(u,{modelValue:t.avatar.topColor,"onUpdate:modelValue":o[3]||(o[3]=e=>t.avatar.topColor=e),options:s(m).config.avatarConfig.topColor},null,8,["modelValue","options"])]),_:1},8,["label"])]),_:1}),a(n,null,{default:l(()=>[a(n,{label:r.$t("avatar.accessories")},{default:l(()=>[a(u,{modelValue:t.avatar.accessoriesType,"onUpdate:modelValue":o[4]||(o[4]=e=>t.avatar.accessoriesType=e),options:s(m).config.avatarConfig.accessories},null,8,["modelValue","options"])]),_:1},8,["label"]),a(n,{label:r.$t("avatar.hairColor")},{default:l(()=>[a(u,{modelValue:t.avatar.hairColor,"onUpdate:modelValue":o[5]||(o[5]=e=>t.avatar.hairColor=e),options:s(m).config.avatarConfig.hairColor},null,8,["modelValue","options"])]),_:1},8,["label"])]),_:1}),a(n,null,{default:l(()=>[a(n,{label:r.$t("avatar.facialHair")},{default:l(()=>[a(u,{modelValue:t.avatar.facialHairType,"onUpdate:modelValue":o[6]||(o[6]=e=>t.avatar.facialHairType=e),options:s(m).config.avatarConfig.facialHair},null,8,["modelValue","options"])]),_:1},8,["label"]),a(n,{label:r.$t("avatar.facialHairColor")},{default:l(()=>[a(u,{modelValue:t.avatar.facialHairColor,"onUpdate:modelValue":o[7]||(o[7]=e=>t.avatar.facialHairColor=e),options:s(m).config.avatarConfig.hairColor},null,8,["modelValue","options"])]),_:1},8,["label"])]),_:1}),a(n,null,{default:l(()=>[a(n,{label:r.$t("avatar.eyebrows")},{default:l(()=>[a(u,{modelValue:t.avatar.eyebrowType,"onUpdate:modelValue":o[8]||(o[8]=e=>t.avatar.eyebrowType=e),options:s(m).config.avatarConfig.eyebrows},null,8,["modelValue","options"])]),_:1},8,["label"]),a(n,{label:r.$t("avatar.eyes")},{default:l(()=>[a(u,{modelValue:t.avatar.eyeType,"onUpdate:modelValue":o[9]||(o[9]=e=>t.avatar.eyeType=e),options:s(m).config.avatarConfig.eyes},null,8,["modelValue","options"])]),_:1},8,["label"])]),_:1}),a(n,null,{default:l(()=>[a(n,{label:r.$t("avatar.mouths")},{default:l(()=>[a(u,{modelValue:t.avatar.mouthType,"onUpdate:modelValue":o[10]||(o[10]=e=>t.avatar.mouthType=e),options:s(m).config.avatarConfig.mouths},null,8,["modelValue","options"])]),_:1},8,["label"])]),_:1}),a(n,null,{default:l(()=>[a(n,{label:r.$t("avatar.skins")},{default:l(()=>[a(u,{modelValue:t.avatar.skinColor,"onUpdate:modelValue":o[11]||(o[11]=e=>t.avatar.skinColor=e),options:s(m).config.avatarConfig.skins},null,8,["modelValue","options"])]),_:1},8,["label"]),a(n,{label:r.$t("avatar.graphic")},{default:l(()=>[a(u,{modelValue:t.avatar.graphicType,"onUpdate:modelValue":o[12]||(o[12]=e=>t.avatar.graphicType=e),options:s(m).config.avatarConfig.graphic},null,8,["modelValue","options"])]),_:1},8,["label"])]),_:1})]),_:1},8,["onSubmit"])]),_:1},512),[[B,s(i)]])]),_:1},8,["onOverlayClick"])),[[B,s(i)]])}},_={class:"text-center text-3xl"},aa={class:"flex items-center justify-center w-full"},ea={class:"flex items-center justify-center w-full p-4"},ia={__name:"RegisterView",setup(t){const f=N();f.fetchConfig();const c=M(!1),m=k({is_circle:!0,topType:"NoHair",accessoriesType:"Blank",hairColor:"Black",facialHairType:"Blank",clotheType:"Hoodie",eyeType:"Default",eyebrowType:"Default",mouthType:"Default",skinColor:"Light",topColor:"Black",graphicType:"Deer",facialHairColor:"Black",clotheColor:"Black",circleColor:"6fb8e0"}),i=k({email:"",password:"",password2:"",firstname:"",lastname:"",yob:1970,lang:f.lang}),p=k({errors:[]}),g=W();j(()=>{f.$patch({lang:i.lang})});const r=()=>{var o=new FormData;o.append("username",i.login),o.append("password",i.pass),C.post(`${f.api}/auth/jwt/login`,o).then(e=>{f.setAccessToken("Bearer "+e.data.access_token),C.defaults.baseURL=f.api,C.defaults.headers.common.Authorization="Bearer "+e.data.access_token,C.get("/users/me").then($=>{f.setUser($.data)}).then(function(){g.push("/dashboard")})}).catch(e=>{e.response&&(e.response.status==422?p.errors.push("Field validation error"):e.response.data.detail=="LOGIN_BAD_CREDENTIALS"?p.errors.push("Wrong login"):(e.response.data.detail="LOGIN_USER_NOT_VERIFIED")&&p.errors.push("User is not verified. Make sure that you have verified your E-Mail-Address and that the organisation has accepted your Account."),p.errors=p.errors.slice(-3))})};return(o,e)=>(v(),V(F,null,{default:l(()=>[a(Q,{bg:"purplePink"},{default:l(({cardClass:$})=>[a(x,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=d=>c.value=d),title:"Sample modal",avatar:m},null,8,["modelValue","avatar"]),a(U,{class:T($),"is-form":"",onSubmit:h(r,["prevent"])},{footer:l(()=>[a(L,null,{default:l(()=>[a(b,{type:"submit",color:"info",label:"Register"}),a(b,{to:"/dashboard",color:"info",outline:"",label:o.$t("account.register")},null,8,["label"])]),_:1})]),default:l(()=>[(v(!0),z(q,null,G(p.errors,(d,P)=>(v(),V(Z,{onDeleted:la=>p.errors.splice(P,1),key:p.errors,color:"danger"},{default:l(()=>[J(A(d),1)]),_:2},1032,["onDeleted"]))),128)),w("h2",_,A(o.$t("account.register")),1),w("div",aa,[a(H,{avatar:m},null,8,["avatar"])]),w("div",ea,[a(b,{color:"info",label:"Change Avatar",onClick:e[1]||(e[1]=d=>c.value=!0),onClose:e[2]||(e[2]=d=>c.value=!1)})]),a(K),a(n,null,{default:l(()=>[a(n,{label:o.$t("account.firstName"),help:"Please enter your first name"},{default:l(()=>[a(u,{modelValue:i.firstname,"onUpdate:modelValue":e[3]||(e[3]=d=>i.firstname=d),icon:s(y),name:"login",autocomplete:"firstname"},null,8,["modelValue","icon"])]),_:1},8,["label"]),a(n,{label:o.$t("account.lastName"),help:"Please enter your last name"},{default:l(()=>[a(u,{modelValue:i.lastname,"onUpdate:modelValue":e[4]||(e[4]=d=>i.lastname=d),icon:s(y),name:"login",autocomplete:"lastname"},null,8,["modelValue","icon"])]),_:1},8,["label"])]),_:1}),a(n,{label:o.$t("account.email"),help:"Please enter your E-Mail-Address"},{default:l(()=>[a(u,{modelValue:i.email,"onUpdate:modelValue":e[5]||(e[5]=d=>i.email=d),icon:s(y),name:"login",autocomplete:"username"},null,8,["modelValue","icon"])]),_:1},8,["label"]),a(n,{label:o.$t("account.password"),help:"Please enter your password"},{default:l(()=>[a(u,{modelValue:i.password,"onUpdate:modelValue":e[6]||(e[6]=d=>i.password=d),icon:s(E),type:"password",name:"password",class:T(""),autocomplete:"current-password"},null,8,["modelValue","icon"])]),_:1},8,["label"]),a(n,{label:o.$t("account.confirmPassword"),help:"Please enter your password"},{default:l(()=>[a(u,{modelValue:i.password2,"onUpdate:modelValue":e[7]||(e[7]=d=>i.password2=d),icon:s(E),type:"password",name:"password",class:T(""),autocomplete:"current-password"},null,8,["modelValue","icon"])]),_:1},8,["label"]),a(n,null,{default:l(()=>[a(n,{label:o.$t("account.yob"),help:"Please enter your year of birth"},{default:l(()=>[a(u,{modelValue:i.yob,"onUpdate:modelValue":e[8]||(e[8]=d=>i.yob=d),type:"number",icon:s(y),name:"login",autocomplete:"username"},null,8,["modelValue","icon"])]),_:1},8,["label"]),a(n,{label:o.$t("account.language")},{default:l(()=>[a(u,{modelValue:i.lang,"onUpdate:modelValue":e[9]||(e[9]=d=>i.lang=d),options:s(f).config.langs},null,8,["modelValue","options"])]),_:1},8,["label"])]),_:1})]),_:2},1032,["class","onSubmit"])]),_:1})]),_:1}))}};export{ia as default};
