import{x as _,y as b,c as g,w as o,ag as w,o as V,a as e,f as h,S as $,O as k,d as i,U as u,u as d,ah as U,X as x,a5 as y,z as r}from"./index.60a4687c.js";import{_ as A}from"./SectionFullScreen.4bae382b.js";import{_ as p,a as B}from"./FormField.6fb7a956.js";import{_ as S}from"./BaseButtons.80fe1415.js";const R={__name:"LoginView",setup(v){const l=_(),s=b({login:"",pass:"",remember:!0}),c=U(),f=()=>{var n=new FormData;n.append("username",s.login),n.append("password",s.pass),r.post(`${l.api}/auth/jwt/login`,n).then(a=>{l.setAccessToken("Bearer "+a.data.access_token),r.defaults.baseURL=l.api,r.defaults.headers.common.Authorization="Bearer "+a.data.access_token,r.get("/users/me").then(m=>{l.setUser(m.data)}).then(function(){c.push("/dashboard")})})};return(n,a)=>(V(),g(w,null,{default:o(()=>[e(A,{bg:"purplePink"},{default:o(({cardClass:m})=>[e(h,{class:$(m),"is-form":"",onSubmit:k(f,["prevent"])},{footer:o(()=>[e(S,null,{default:o(()=>[e(i,{type:"submit",color:"info",label:"Login"}),e(i,{to:"/dashboard",color:"info",outline:"",label:"Back"})]),_:1})]),default:o(()=>[e(p,{label:"E-Mail",help:"Please enter your E-Mail-Address"},{default:o(()=>[e(u,{modelValue:s.login,"onUpdate:modelValue":a[0]||(a[0]=t=>s.login=t),icon:d(x),name:"login",autocomplete:"username"},null,8,["modelValue","icon"])]),_:1}),e(p,{label:"Password",help:"Please enter your password"},{default:o(()=>[e(u,{modelValue:s.pass,"onUpdate:modelValue":a[1]||(a[1]=t=>s.pass=t),icon:d(y),type:"password",name:"password",autocomplete:"current-password"},null,8,["modelValue","icon"])]),_:1}),e(B,{modelValue:s.remember,"onUpdate:modelValue":a[2]||(a[2]=t=>s.remember=t),name:"remember",label:"Remember","input-value":!0},null,8,["modelValue"])]),_:2},1032,["class","onSubmit"])]),_:1})]),_:1}))}};export{R as default};
