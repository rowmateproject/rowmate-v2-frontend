import{r as m,q as z,o as s,c as x,w as d,h as a,s as F,v as H,t as R,x as q,y as G,z as g,A as S,B as b,p as c,a as n,C as i,F as C,D,E as $,d as V,u,G as I,H as J,I as K,_ as O,J as Q,b as W,e as X,f as Y,g as Z,i as ee,K as te,k as ae}from"./index.60a4687c.js";import{_ as M}from"./CardBoxModal.5fb0562b.js";import{_ as P}from"./BaseButtons.80fe1415.js";const le={class:"checkbox"},se=a("span",{class:"check"},null,-1),oe={__name:"TableCheckboxCell",props:{type:{type:String,default:"td"}},emits:["checked"],setup(v,{emit:h}){const l=m(!1);return z(l,f=>{h("checked",f)}),(f,r)=>(s(),x(R(v.type),{class:"lg:w-1"},{default:d(()=>[a("label",le,[F(a("input",{"onUpdate:modelValue":r[0]||(r[0]=k=>l.value=k),type:"checkbox"},null,512),[[H,l.value]]),se])]),_:1}))}},ne=a("p",null,"The boat was deleted",-1),ce={key:0,class:"p-3 bg-gray-100/50 dark:bg-slate-800"},de={key:0},ie=a("th",null,"Name",-1),ue=a("th",null,"Category",-1),re=a("th",null,"People",-1),_e=a("th",null,"Cox",-1),me=a("th",null,null,-1),he={"data-label":"Name"},fe={"data-label":"Category"},pe={"data-label":"Total"},be={"data-label":"Cox"},ve={class:"before:hidden lg:w-1 whitespace-nowrap"},ke={key:1,class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},ye={__name:"BoatsEditTable",props:{checkable:Boolean},setup(v){const h=q(),l=G({boats:[],delete:{_id:"",name:""}});g.defaults.baseURL=h.api,g.defaults.headers.common.Authorization=h.access_token;const f=async()=>{l.boats=await g.get("/boats/").then(o=>o.data)};S(()=>{f()});const r=m(!1),k=m(!1),w=m(10),p=m(0),y=m([]),A=b(()=>l.boats.slice(w.value*p.value,w.value*(p.value+1))),B=b(()=>Math.ceil(l.boats.length/w.value)),N=b(()=>p.value+1),T=b(()=>{const o=[];for(let t=0;t<B.value;t++)o.push(t);return o}),E=(o,t)=>{const e=[];return o.forEach(_=>{t(_)||e.push(_)}),e},L=(o,t)=>{o?y.value.push(t):y.value=E(y.value,e=>e.id===t.id)},U=(o,t)=>{l.delete._id=o,l.delete.name=t,k.value=!0},j=o=>{g.delete("/boats/"+o).then(()=>{r.value=!0,f()})};return(o,t)=>(s(),c(C,null,[n(M,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),title:"Boat deleted"},{default:d(()=>[ne]),_:1},8,["modelValue"]),n(M,{modelValue:k.value,"onUpdate:modelValue":t[1]||(t[1]=e=>k.value=e),buttonLabel:"Delete",title:"Confirm deletion",button:"danger","has-cancel":"",onConfirm:t[2]||(t[2]=e=>j(l.delete._id))},{default:d(()=>[a("p",null,"Do you want to delete the boat with the name "+i(l.delete.name)+" and the id "+i(l.delete._id)+"?",1)]),_:1},8,["modelValue"]),y.value.length?(s(),c("div",ce,[(s(!0),c(C,null,D(y.value,e=>(s(),c("span",{key:e.id,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-slate-700"},i(e.name),1))),128))])):$("",!0),(s(),c("table",{key:l.boats},[a("thead",null,[a("tr",null,[v.checkable?(s(),c("th",de)):$("",!0),ie,ue,re,_e,me])]),(s(),c("tbody",{key:l.boats},[(s(!0),c(C,null,D(u(A),e=>(s(),c("tr",{key:e._id},[v.checkable?(s(),x(oe,{key:0,onChecked:_=>L(_,e)},null,8,["onChecked"])):$("",!0),a("td",he,i(e.name),1),a("td",fe,i(e.category),1),a("td",pe,i(e.total),1),a("td",be,i(e.cox),1),a("td",ve,[n(P,{type:"justify-start lg:justify-end","no-wrap":""},{default:d(()=>[n(V,{color:"info",icon:u(I),small:"",onClick:t[3]||(t[3]=_=>o.isModalActive=!0)},null,8,["icon"]),n(V,{color:"danger",icon:u(J),small:"",onClick:_=>U(e._id,e.name)},null,8,["icon","onClick"])]),_:2},1024)])]))),128))]))])),u(B)!==1?(s(),c("div",ke,[n(K,null,{default:d(()=>[n(P,null,{default:d(()=>[(s(!0),c(C,null,D(u(T),e=>(s(),x(V,{key:e,active:e===p.value,label:e+1,color:e===p.value?"lightDark":"whiteDark",small:"",onClick:_=>p.value=e},null,8,["active","label","color","onClick"]))),128))]),_:1}),a("small",null,"Page "+i(u(N))+" of "+i(u(B)),1)]),_:1})])):$("",!0)],64))}},ge=a("b",null,"Responsive table.",-1),Ce=ee(" Collapses on mobile "),Be={__name:"BoatsView",setup(v){const h=m(null),l=()=>{h.value=Q()};return S(()=>{l()}),b(()=>mainStore.clients.slice(0,4)),b(()=>mainStore.history),(f,r)=>(s(),x(O,null,{default:d(()=>[n(Z,null,{default:d(()=>[n(W,{icon:u(te),title:"Boats",main:""},null,8,["icon"]),n(X,{color:"info",icon:u(ae)},{default:d(()=>[ge,Ce]),_:1},8,["icon"]),n(Y,{"has-table":""},{default:d(()=>[n(ye)]),_:1})]),_:1})]),_:1}))}};export{Be as default};
